import{s as z}from"./wafcdn-89d49299.js";import{i as L}from"./index-e0333ef0.js";import{_ as O,r as C,m as P,N as U,f as c,o as _,c as A,g as l,w as o,h,a,t as s,j as u,F as E,q as g,K as H,p as R,k as j,L as F}from"./index-323f86e9.js";import"./request-468cb1c7.js";const n=p=>(R("data-v-a08eb5d3"),p=p(),j(),p),q={class:"card-panel"},K=n(()=>a("br",null,null,-1)),T={class:"text"},X=n(()=>a("br",null,null,-1)),Y={class:"card-panel"},$=n(()=>a("br",null,null,-1)),G={class:"percentage-value"},J=n(()=>a("br",null,null,-1)),Q=n(()=>a("br",null,null,-1)),W={class:"percentage-label"},Z={class:"text"},ee=n(()=>a("br",null,null,-1)),te={class:"card-panel"},ae=n(()=>a("br",null,null,-1)),le={class:"percentage-value"},oe=n(()=>a("br",null,null,-1)),se=n(()=>a("br",null,null,-1)),ne={class:"percentage-label"},ce={class:"text"},ue=n(()=>a("br",null,null,-1)),re={__name:"stat",setup(p){const e=C({cpu:{percent:0,count:0},memory:{progress:0,used:"",total:""},disk:{progress:0,used:"",total:""},conf:{time:"",version:""},file:{today:0,total:0},flushDelay:15});let m=null;const f=[],b=[],k=[],S=C(null),V={title:{text:"网络IO"},xAxis:{type:"category",data:f},yAxis:{type:"value",axisLabel:{formatter:(t,r)=>F(t)}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},valueFormatter:t=>F(t)},series:[{name:"接收",data:k,type:"line",areaStyle:{}},{name:"发送",data:b,type:"line",areaStyle:{}}]},D=()=>{z().then(t=>{e.value.cpu.percent=Math.round(t.cpu.percent),e.value.cpu.count=t.cpu.count,e.value.memory.progress=Math.round(t.memory.used/t.memory.total*100),e.value.memory.used=g(t.memory.used),e.value.memory.total=g(t.memory.total),e.value.disk.progress=Math.round(t.disk.used/t.disk.total*100),e.value.disk.used=g(t.disk.used),e.value.disk.total=g(t.disk.total),e.value.conf.time=H("Y-m-d H:i:s",t.conf.time),e.value.conf.version=t.conf.version,e.value.file.today=t.file.today,e.value.file.total=t.file.total;const r=new Date;f.push(r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()),b.push(t.traffic.send),k.push(t.traffic.recv),f.length>30&&(f.shift(),k.shift(),b.shift()),m.setOption(V)})};P(()=>{m=L(S.value),m.hideLoading(),window.onresize=function(){m.resize()}}),D();const B=setInterval(D,e.value.flushDelay*1e3);return U(()=>{clearInterval(B)}),(t,r)=>{const v=c("el-option"),M=c("el-select"),x=c("el-progress"),d=c("el-col"),w=c("el-row"),y=c("el-link"),N=c("el-tooltip"),I=c("el-card");return _(),A(E,null,[l(M,{modelValue:e.value.flushDelay,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value.flushDelay=i)},{default:o(()=>[(_(),h(v,{key:5,label:"服务器状态刷新间隔: 5秒",value:5})),(_(),h(v,{key:15,label:"服务器状态刷新间隔: 15秒",value:15})),(_(),h(v,{key:30,label:"服务器状态刷新间隔: 30秒",value:30})),(_(),h(v,{key:60,label:"服务器状态刷新间隔: 60秒",value:60}))]),_:1},8,["modelValue"]),l(w,{gutter:40,class:"panel-group"},{default:o(()=>[l(d,{xs:24,sm:8},{default:o(()=>[a("div",q,[K,l(x,{type:"circle",percentage:e.value.cpu.percent},null,8,["percentage"]),a("div",T," CPU / "+s(e.value.cpu.count),1),X])]),_:1}),l(d,{xs:24,sm:8},{default:o(()=>[a("div",Y,[$,l(x,{type:"circle",percentage:e.value.memory.progress},{default:o(({percentage:i})=>[a("span",G,s(i)+"%",1),J,Q,a("span",W,s(e.value.memory.used),1)]),_:1},8,["percentage"]),a("div",Z," 内存 / "+s(e.value.memory.total),1),ee])]),_:1}),l(d,{xs:24,sm:8},{default:o(()=>[a("div",te,[ae,l(x,{type:"circle",percentage:e.value.disk.progress},{default:o(({percentage:i})=>[a("span",le,s(i)+"%",1),oe,se,a("span",ne,s(e.value.disk.used),1)]),_:1},8,["percentage"]),a("div",ce," 硬盘 / "+s(e.value.disk.total),1),ue])]),_:1})]),_:1}),l(w,{gutter:12,class:"notifyCard"},{default:o(()=>[l(d,{span:12},{default:o(()=>[l(I,{shadow:"always"},{default:o(()=>[u(" 配置版本: "),l(y,{type:"info"},{default:o(()=>[u(s(e.value.conf.time),1)]),_:1}),u("  -  "),l(N,{content:e.value.conf.version},{default:o(()=>[l(y,{type:"primary"},{default:o(()=>[u(s(e.value.conf.version.substring(0,12)),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(I,{shadow:"always"},{default:o(()=>[u(" 缓存文件: 今日 "),l(y,{type:"success"},{default:o(()=>[u(s(e.value.file.today),1)]),_:1}),u(" / 总计 "),l(y,{type:"primary"},{default:o(()=>[u(s(e.value.file.total),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(d,{span:24},{default:o(()=>[a("div",{ref_key:"netChart",ref:S,class:"netChart"},null,512)]),_:1})]),_:1})],64)}}},me=O(re,[["__scopeId","data-v-a08eb5d3"]]);export{me as default};
