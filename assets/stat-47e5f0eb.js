import{s as z}from"./request-d2d4f301.js";import{i as L}from"./index-d8696fb1.js";import{f as h,d as N,b as F}from"./index-06ae308c.js";import{_ as O,r as V,m as P,f as c,o as p,c as A,g as l,w as o,h as g,a,t as s,j as u,F as E,p as H,k as R}from"./index-b8d43820.js";const T=d=>z({url:"/stat",method:"get",params:d,viewLoading:!1});const n=d=>(H("data-v-064706df"),d=d(),R(),d),U={class:"card-panel"},j=n(()=>a("br",null,null,-1)),X={class:"text"},Y=n(()=>a("br",null,null,-1)),$={class:"card-panel"},q=n(()=>a("br",null,null,-1)),G={class:"percentage-value"},J=n(()=>a("br",null,null,-1)),K=n(()=>a("br",null,null,-1)),Q={class:"percentage-label"},W={class:"text"},Z=n(()=>a("br",null,null,-1)),ee={class:"card-panel"},te=n(()=>a("br",null,null,-1)),ae={class:"percentage-value"},le=n(()=>a("br",null,null,-1)),oe=n(()=>a("br",null,null,-1)),se={class:"percentage-label"},ne={class:"text"},ce=n(()=>a("br",null,null,-1)),ue={__name:"stat",setup(d){const e=V({cpu:{percent:0,count:0},memory:{progress:0,used:"",total:""},disk:{progress:0,used:"",total:""},conf:{time:"",version:""},file:{today:0,total:0},flushDelay:15});let f=null;const m=[],k=[],b=[],S=V(null),B={title:{text:"网络IO"},xAxis:{type:"category",data:m},yAxis:{type:"value",axisLabel:{formatter:(t,r)=>F(t)}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},valueFormatter:t=>F(t)},series:[{name:"接收",data:b,type:"line",areaStyle:{}},{name:"发送",data:k,type:"line",areaStyle:{}}]};P(()=>{f=L(S.value),f.hideLoading(),window.onresize=function(){f.resize()}});const D=()=>{T().then(t=>{e.value.cpu.percent=Math.round(t.cpu.percent),e.value.cpu.count=t.cpu.count,e.value.memory.progress=Math.round(t.memory.used/t.memory.total*100),e.value.memory.used=h(t.memory.used),e.value.memory.total=h(t.memory.total),e.value.disk.progress=Math.round(t.disk.used/t.disk.total*100),e.value.disk.used=h(t.disk.used),e.value.disk.total=h(t.disk.total),e.value.conf.time=N("Y-m-d H:i:s",t.conf.time),e.value.conf.version=t.conf.version,e.value.file.today=t.file.today,e.value.file.total=t.file.total;const r=new Date;m.push(r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()),k.push(t.traffic.send),b.push(t.traffic.recv),m.length>30&&(m.shift(),b.shift(),k.shift()),f.setOption(B)}),setTimeout(D,e.value.flushDelay*1e3)};return D(),(t,r)=>{const v=c("el-option"),I=c("el-select"),x=c("el-progress"),i=c("el-col"),w=c("el-row"),y=c("el-link"),M=c("el-tooltip"),C=c("el-card");return p(),A(E,null,[l(I,{modelValue:e.value.flushDelay,"onUpdate:modelValue":r[0]||(r[0]=_=>e.value.flushDelay=_)},{default:o(()=>[(p(),g(v,{key:5,label:"服务器状态刷新间隔: 5秒",value:5})),(p(),g(v,{key:15,label:"服务器状态刷新间隔: 15秒",value:15})),(p(),g(v,{key:30,label:"服务器状态刷新间隔: 30秒",value:30})),(p(),g(v,{key:60,label:"服务器状态刷新间隔: 60秒",value:60}))]),_:1},8,["modelValue"]),l(w,{gutter:40,class:"panel-group"},{default:o(()=>[l(i,{xs:24,sm:8},{default:o(()=>[a("div",U,[j,l(x,{type:"circle",percentage:e.value.cpu.percent},null,8,["percentage"]),a("div",X," CPU / "+s(e.value.cpu.count),1),Y])]),_:1}),l(i,{xs:24,sm:8},{default:o(()=>[a("div",$,[q,l(x,{type:"circle",percentage:e.value.memory.progress},{default:o(({percentage:_})=>[a("span",G,s(_)+"%",1),J,K,a("span",Q,s(e.value.memory.used),1)]),_:1},8,["percentage"]),a("div",W," 内存 / "+s(e.value.memory.total),1),Z])]),_:1}),l(i,{xs:24,sm:8},{default:o(()=>[a("div",ee,[te,l(x,{type:"circle",percentage:e.value.disk.progress},{default:o(({percentage:_})=>[a("span",ae,s(_)+"%",1),le,oe,a("span",se,s(e.value.disk.used),1)]),_:1},8,["percentage"]),a("div",ne," 硬盘 / "+s(e.value.disk.total),1),ce])]),_:1})]),_:1}),l(w,{gutter:12,class:"notifyCard"},{default:o(()=>[l(i,{span:12},{default:o(()=>[l(C,{shadow:"always"},{default:o(()=>[u(" 配置版本: "),l(y,{type:"info"},{default:o(()=>[u(s(e.value.conf.time),1)]),_:1}),u("  -  "),l(M,{content:e.value.conf.version},{default:o(()=>[l(y,{type:"primary"},{default:o(()=>[u(s(e.value.conf.version.substring(0,12)),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(i,{span:12},{default:o(()=>[l(C,{shadow:"always"},{default:o(()=>[u(" 缓存文件: 今日 "),l(y,{type:"success"},{default:o(()=>[u(s(e.value.file.today),1)]),_:1}),u(" / 总计 "),l(y,{type:"primary"},{default:o(()=>[u(s(e.value.file.total),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(i,{span:24},{default:o(()=>[a("div",{ref_key:"netChart",ref:S,class:"netChart"},null,512)]),_:1})]),_:1})],64)}}},pe=O(ue,[["__scopeId","data-v-064706df"]]);export{pe as default};
