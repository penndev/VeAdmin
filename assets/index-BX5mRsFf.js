import{_ as q,r as _,b as v,d as L,u as E,e as N,f as n,c as R,a as t,g as e,w as a,o as k,h as F,i as P,j,p as z,k as M,l as T,E as x}from"./index-BDHhLXhY.js";import{s as V}from"./request-BsH2jed7.js";const A=l=>V({url:"/captcha",method:"get",params:l}),G=l=>V({url:"/login",method:"post",data:l}),w=l=>(z("data-v-39c97e7c"),l=l(),M(),l),H={id:"userLayout"},J={class:"login_panel"},K={class:"login_panel_form"},O=w(()=>t("div",{class:"login_panel_form_title"},[t("img",{class:"login_panel_form_title_logo",src:T}),t("div",{class:"login_panel_form_title_p"}," 用户登录 ")],-1)),Q={class:"input-icon"},W={class:"input-icon"},X={class:"vPicBox"},Y={class:"vPic"},Z=["src"],$=w(()=>t("div",{class:"login_panel_right"},null,-1)),ee={__name:"index",setup(l){const i=_("lock"),y=()=>{i.value=i.value==="lock"?"unlock":"lock"},m=_(""),p=()=>{A().then(r=>{m.value=r.captchaURL,s.captchaID=r.captchaID,s.captcha=null})};p();const s=v({username:"",password:"",captchaID:"",captcha:""}),C=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,message:"用户名最少为5个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码最少为6个字符",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:4,message:"验证码长度为四位",trigger:"change"}]}),h=_(null),g=L(),b=E(),I=N(),U=()=>{h.value.validate(r=>{r?G(s).then(o=>{if(typeof o.token>"u"){x.error("登录失败，未获取到token！");return}g.token=o.token,g.routes=o.routes,b.push(I.query.redirect??o.index??"/")}).catch(()=>{p()}):x.error("请输入正确的数据！")})};return(r,o)=>{const B=n("User"),f=n("el-icon"),d=n("el-input"),u=n("el-form-item"),D=n("el-button"),S=n("el-form");return k(),R("div",H,[t("div",J,[t("div",K,[O,e(S,{ref_key:"loginForm",ref:h,rules:C,model:s},{default:a(()=>[e(u,{prop:"username"},{default:a(()=>[e(d,{modelValue:s.username,"onUpdate:modelValue":o[0]||(o[0]=c=>s.username=c),placeholder:"请输入用户名"},{suffix:a(()=>[t("span",Q,[e(f,null,{default:a(()=>[e(B)]),_:1})])]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:a(()=>[e(d,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=c=>s.password=c),placeholder:"请输入密码",type:i.value==="lock"?"password":"text"},{suffix:a(()=>[t("a",W,[e(f,null,{default:a(()=>[(k(),F(P(i.value),{onClick:y}))]),_:1})])]),_:1},8,["modelValue","type"])]),_:1}),e(u,{prop:"captcha"},{default:a(()=>[t("div",X,[e(d,{modelValue:s.captcha,"onUpdate:modelValue":o[2]||(o[2]=c=>s.captcha=c),placeholder:"请输入验证码",style:{width:"60%"}},null,8,["modelValue"]),t("div",Y,[t("img",{alt:"验证码",src:m.value,onClick:p},null,8,Z)])])]),_:1}),e(u,null,{default:a(()=>[e(D,{type:"primary",size:"large",style:{width:"46%"},onClick:U},{default:a(()=>[j(" 登 录 ")]),_:1})]),_:1})]),_:1},8,["rules","model"])]),$])])}}},se=q(ee,[["__scopeId","data-v-39c97e7c"]]);export{se as default};
