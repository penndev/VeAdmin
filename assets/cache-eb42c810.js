import{a as A,d as b}from"./wafcdn-b7f9ef01.js";import{f as H,d as k}from"./index-b5a72fd0.js";import{r as C,f as c,o as _,c as I,a as q,g as e,w as t,j as r,h as g,q as h,t as v,n as y,F as P,v as w,E as x}from"./index-872b408c.js";import"./request-f84add98.js";const Y=q("br",null,null,-1),K={__name:"cache",setup(j){const f=C(),z=()=>{l.value.data.forEach(a=>{f.value.toggleRowSelection(a)})},l=C({selectStat:!1,total:0,query:{limit:20,page:1,order:null,name:null},data:[]}),B=a=>{l.value.query.name=null,l.value.query.order=null,i()},F=a=>{l.value.query.page=a,i()},E=a=>{l.value.query.limit=a,i()},V=({column:a,prop:o,order:u})=>{let m="";u==="descending"?m="-":u==="ascending"&&(m="+"),l.value.query.order=m+o,i()},i=()=>{A(l.value.query).then(a=>{l.value.data=a.data,l.value.total=a.total})},D=a=>{w.confirm(`请仔细确认是否删除数据[${a.File}]?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{b({file:a.File}).then(o=>{x.warning(o),i()})})},R=()=>{const a=f.value.getSelectionRows();let o="";a.forEach(u=>{o!==""&&(o+=","),o+=u.File}),w.confirm(`请仔细确认是否删除 ${a.length} 条数据?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{b({file:o}).then(u=>{x.warning(u),i()})})};return i(),(a,o)=>{const u=c("el-input"),m=c("el-form-item"),s=c("el-button"),T=c("el-form"),d=c("el-table-column"),p=c("el-link"),S=c("el-tooltip"),N=c("el-table"),$=c("el-pagination"),M=c("el-main");return _(),I(P,null,[q("div",null,[e(T,{inline:!0},{default:t(()=>[e(m,{label:"名称"},{default:t(()=>[e(u,{modelValue:l.value.query.name,"onUpdate:modelValue":o[0]||(o[0]=n=>l.value.query.name=n),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(s,{type:"primary",icon:"search",onClick:i},{default:t(()=>[r(" 查询 ")]),_:1}),e(s,{type:"info",icon:"Refresh",onClick:B},{default:t(()=>[r(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(M,{style:{"background-color":"#fff"}},{default:t(()=>[e(s,{type:"primary",size:"small",icon:l.value.selectStat?"SemiSelect":"Select",onClick:o[1]||(o[1]=n=>l.value.selectStat=!l.value.selectStat)},null,8,["icon"]),l.value.selectStat?(_(),g(s,{key:0,size:"small",onClick:z},{default:t(()=>[r(" 反选 ")]),_:1})):h("",!0),l.value.selectStat?(_(),g(s,{key:1,size:"small",onClick:f.value.clearSelection},{default:t(()=>[r(" 清空 ")]),_:1},8,["onClick"])):h("",!0),l.value.selectStat?(_(),g(s,{key:2,size:"small",type:"danger",onClick:R},{default:t(()=>[r(" 删除选中 ")]),_:1})):h("",!0),e(N,{ref_key:"tableRef",ref:f,data:l.value.data,onSortChange:V},{default:t(()=>[l.value.selectStat?(_(),g(d,{key:0,type:"selection",width:"50"})):h("",!0),e(d,{label:"站点",prop:"SiteID"}),e(d,{label:"路径",align:"center"},{default:t(n=>[e(S,{content:n.row.File,placement:"top"},{default:t(()=>[e(p,null,{default:t(()=>[r(v(n.row.Path),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(d,{label:"文件大小",align:"center"},{default:t(n=>[e(p,null,{default:t(()=>[r(v(y(H)(n.row.Size)),1)]),_:2},1024)]),_:1}),e(d,{label:"访问日期",align:"center"},{default:t(n=>[e(p,null,{default:t(()=>[r(v(y(k)("Y-m-d H:i:s",n.row.Accessed)),1)]),_:2},1024)]),_:1}),e(d,{label:"过期时间",align:"center"},{default:t(n=>[e(S,{content:"创建："+n.row.CreatedAt,placement:"top"},{default:t(()=>[e(p,null,{default:t(()=>[r(v(y(k)("Y-m-d H:i:s",n.row.Expried)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(d,{fixed:"right",label:"操作",width:"65"},{default:t(n=>[e(s,{link:"",type:"danger",onClick:L=>D(n.row)},{default:t(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Y,e($,{background:"",layout:"total, sizes, prev, pager, next",total:l.value.total,"page-size":l.value.query.limit,onCurrentChange:F,onSizeChange:E},null,8,["total","page-size"])]),_:1})],64)}}};export{K as default};
