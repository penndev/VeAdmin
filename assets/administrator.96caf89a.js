import{s as v}from"./request.8164fd8e.js";import{r as g,c as F,e as h,d as e,w as t,F as N,a as s,b as U,h as m,E as $,i as p}from"./index.8345f292.js";const z=r=>v({url:"/system/admin",method:"get",params:r}),M=r=>v({url:"/system/admin",method:"post",data:r}),P=r=>v({url:"/system/admin",method:"put",data:r}),I=r=>v({url:"/system/admin",method:"delete",params:r}),L=m("\u67E5\u8BE2"),j=m("\u91CD\u7F6E"),G=m("\u65B0\u589E"),H=m("\u7F16\u8F91"),J=m("\u5220\u9664"),K=h("br",null,null,-1),O={class:"dialog-footer"},Q=m("\u53D6\u6D88"),W=m("\u786E\u5B9A"),Z={__name:"administrator",setup(r){const n=g({total:0,query:{limit:20,page:1,order:null,name:null},data:[]}),k=o=>{n.value.query.name=null},C=o=>{n.value.query.page=o,f()},w=o=>{n.value.query.limit=o,f()},V=({column:o,prop:a,order:_})=>{let u="";_==="descending"?u="-":_==="ascending"&&(u="+"),n.value.query.order=u+a,f()},f=()=>{z(n.value.query).then(o=>{n.value.data=o.list,n.value.total=o.total})},b=g(null),l=g({visible:!1,title:"dialog",form:{},formRule:{email:[{required:!0,message:"\u90AE\u7BB1",trigger:"blur"},{min:5,message:"\u7528\u6237\u540D\u6700\u5C11\u4E3A5\u4E2A\u5B57\u7B26",trigger:"blur"}]},formAction:"add"}),x=()=>{l.value.title="\u521B\u5EFA\u6570\u636E",l.value.visible=!0,l.value.formAction="add",l.value.form={}},A=o=>{l.value.title="\u521B\u5EFA\u6570\u636E",l.value.visible=!0,l.value.formAction="edit",l.value.form=o},q=o=>{$.confirm("\u8BF7\u4ED4\u7EC6\u786E\u8BA4\u662F\u5426\u5220\u9664?","\u8B66\u544A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{I({id:o}).then(a=>{p.warning(a)})})},S=()=>{b.value.validate(o=>{o?l.value.formAction==="add"?M(l.value.form).then(a=>{l.value.visible=!1,p.info(a)}):l.value.formAction==="edit"?(P(l.value.form).then(a=>{l.value.visible=!1,p.info(a)}),l.value.visible=!1):p.info("\u63D0\u4EA4\u9519\u8BEF"):p.error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u636E\uFF01")})};return f(),(o,a)=>{const _=s("el-input"),u=s("el-form-item"),d=s("el-button"),y=s("el-form"),c=s("el-table-column"),B=s("el-table"),D=s("el-pagination"),R=s("el-main"),E=s("el-dialog");return U(),F(N,null,[h("div",null,[e(y,{inline:!0},{default:t(()=>[e(u,{label:"\u7BA1\u7406\u5458"},{default:t(()=>[e(_,{placeholder:"\u7BA1\u7406\u5458\u540D\u79F0",modelValue:n.value.query.name,"onUpdate:modelValue":a[0]||(a[0]=i=>n.value.query.name=i),clearable:""},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(d,{type:"primary",icon:"search",onClick:f},{default:t(()=>[L]),_:1}),e(d,{type:"info",icon:"Refresh",onClick:k},{default:t(()=>[j]),_:1})]),_:1})]),_:1})]),e(R,{style:{"background-color":"#fff"}},{default:t(()=>[e(d,{type:"primary",icon:"Plus",onClick:x},{default:t(()=>[G]),_:1}),e(B,{data:n.value.data,style:{width:"100%"},onSortChange:V},{default:t(()=>[e(c,{fixed:"",prop:"id",label:"ID",width:"80",sortable:"custom"}),e(c,{prop:"email",label:"\u90AE\u7BB1",width:"240"}),e(c,{prop:"nickname",label:"\u540D\u79F0",width:"160"}),e(c,{prop:"updated_at",label:"\u6700\u8FD1\u66F4\u65B0",width:"200"}),e(c,{prop:"created_at",label:"\u521B\u5EFA\u65E5\u671F",width:"200"}),e(c,{fixed:"right",label:"\u64CD\u4F5C",width:"120"},{default:t(i=>[e(d,{link:"",type:"primary",onClick:T=>A(i.row)},{default:t(()=>[H]),_:2},1032,["onClick"]),e(d,{link:"",type:"danger",onClick:T=>q(i.row.id)},{default:t(()=>[J]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),K,e(D,{background:"",layout:"total, sizes, prev, pager, next",total:n.value.total,onCurrentChange:C,onSizeChange:w},null,8,["total"])]),_:1}),e(E,{title:l.value.title,"close-on-click-modal":!1,modelValue:l.value.visible,"onUpdate:modelValue":a[3]||(a[3]=i=>l.value.visible=i),"destroy-on-close":"","close-on-press-escape":"",center:""},{footer:t(()=>[h("span",O,[e(d,{onClick:a[2]||(a[2]=i=>l.value.visible=!1)},{default:t(()=>[Q]),_:1}),e(d,{type:"primary",onClick:S},{default:t(()=>[W]),_:1})])]),default:t(()=>[e(y,{ref_key:"dialogRef",ref:b,"label-width":"80px",model:l.value.form,rules:l.value.formRule},{default:t(()=>[e(u,{label:"\u90AE\u7BB1",prop:"email"},{default:t(()=>[e(_,{modelValue:l.value.form.email,"onUpdate:modelValue":a[1]||(a[1]=i=>l.value.form.email=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])],64)}}};export{Z as default};
