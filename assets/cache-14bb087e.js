import{a as N,d as T}from"./wafcdn-3ad2f696.js";import{f as $,d as S}from"./index-646683c3.js";import{r as C,f as r,o as f,c as A,a as k,g as e,w as t,j as u,h as v,q as y,t as p,n as h,F as H,v as I,E as M}from"./index-37b98a7a.js";import"./request-b976ea44.js";const P=k("br",null,null,-1),J={__name:"cache",setup(Y){const g=C(),w=()=>{l.value.data.forEach(n=>{g.value.toggleRowSelection(n)})},l=C({selectStat:!1,total:0,query:{limit:20,page:1,order:null,name:null},data:[]}),q=n=>{l.value.query.name=null,l.value.query.order=null,c()},x=n=>{l.value.query.page=n,c()},z=n=>{l.value.query.limit=n,c()},B=({column:n,prop:o,order:m})=>{let s="";m==="descending"?s="-":m==="ascending"&&(s="+"),l.value.query.order=s+o,c()},c=()=>{N(l.value.query).then(n=>{l.value.data=n.data,l.value.total=n.total})},V=n=>{I.confirm(`请仔细确认是否删除数据[${n}]?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{T({id:n}).then(o=>{M.warning(o),c()})})};return c(),(n,o)=>{const m=r("el-input"),s=r("el-form-item"),d=r("el-button"),E=r("el-form"),i=r("el-table-column"),_=r("el-link"),b=r("el-tooltip"),D=r("el-table"),F=r("el-pagination"),R=r("el-main");return f(),A(H,null,[k("div",null,[e(E,{inline:!0},{default:t(()=>[e(s,{label:"名称"},{default:t(()=>[e(m,{modelValue:l.value.query.name,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.query.name=a),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(d,{type:"primary",icon:"search",onClick:c},{default:t(()=>[u(" 查询 ")]),_:1}),e(d,{type:"info",icon:"Refresh",onClick:q},{default:t(()=>[u(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(R,{style:{"background-color":"#fff"}},{default:t(()=>[e(d,{type:"primary",size:"small",icon:l.value.selectStat?"SemiSelect":"Select",onClick:o[1]||(o[1]=a=>l.value.selectStat=!l.value.selectStat)},null,8,["icon"]),l.value.selectStat?(f(),v(d,{key:0,size:"small",onClick:w},{default:t(()=>[u(" 反选 ")]),_:1})):y("",!0),l.value.selectStat?(f(),v(d,{key:1,size:"small",onClick:o[2]||(o[2]=a=>g.value.clearSelection())},{default:t(()=>[u(" 清空 ")]),_:1})):y("",!0),e(D,{ref_key:"tableRef",ref:g,data:l.value.data,onSortChange:B},{default:t(()=>[l.value.selectStat?(f(),v(i,{key:0,type:"selection",width:"50"})):y("",!0),e(i,{label:"站点",prop:"SiteID"}),e(i,{label:"路径",align:"center"},{default:t(a=>[e(b,{content:a.row.File,placement:"top"},{default:t(()=>[e(_,null,{default:t(()=>[u(p(a.row.Path),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(i,{label:"文件大小",align:"center"},{default:t(a=>[e(_,null,{default:t(()=>[u(p(h($)(a.row.Size)),1)]),_:2},1024)]),_:1}),e(i,{label:"访问日期",align:"center"},{default:t(a=>[e(_,null,{default:t(()=>[u(p(h(S)("Y-m-d H:i:s",a.row.Accessed)),1)]),_:2},1024)]),_:1}),e(i,{label:"过期时间",align:"center"},{default:t(a=>[e(b,{content:"创建："+a.row.CreatedAt,placement:"top"},{default:t(()=>[e(_,null,{default:t(()=>[u(p(h(S)("Y-m-d H:i:s",a.row.Expried)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(i,{fixed:"right",label:"操作",width:"65"},{default:t(a=>[e(d,{link:"",type:"danger",onClick:j=>V(a.row.id)},{default:t(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),P,e(F,{background:"",layout:"total, sizes, prev, pager, next",total:l.value.total,"page-size":l.value.query.limit,onCurrentChange:x,onSizeChange:z},null,8,["total","page-size"])]),_:1})],64)}}};export{J as default};
