import{s as q}from"./request-3e2f35a1.js";import{r as k,f as n,o as S,c as V,a as c,g as e,w as o,j as _,t as x,F as D}from"./index-2134de4c.js";const z=p=>q({url:"/system/admin/accesslog",method:"get",params:p}),A=c("br",null,null,-1),N={__name:"accesslog",setup(p){const a=k({total:0,query:{limit:20,page:1,order:"-id",admin:null},data:[]}),h=()=>{a.value.query.admin=null,r()},g=t=>{a.value.query.page=t,r()},f=t=>{a.value.query.limit=t,r()},b=({column:t,prop:i,order:u})=>{let s="";u==="descending"?s="-":u==="ascending"&&(s="+"),a.value.query.order=s+i,r()},r=()=>{z(a.value.query).then(t=>{a.value.data=t.data,a.value.total=t.total})};return r(),(t,i)=>{const u=n("el-input"),s=n("el-form-item"),m=n("el-button"),y=n("el-form"),l=n("el-table-column"),v=n("el-table"),w=n("el-pagination"),C=n("el-main");return S(),V(D,null,[c("div",null,[e(y,{inline:!0},{default:o(()=>[e(s,{label:"管理员"},{default:o(()=>[e(u,{modelValue:a.value.query.admin,"onUpdate:modelValue":i[0]||(i[0]=d=>a.value.query.admin=d),placeholder:"管理员ID",clearable:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(m,{type:"primary",icon:"search",onClick:r},{default:o(()=>[_(" 查询 ")]),_:1}),e(m,{type:"info",icon:"Refresh",onClick:h},{default:o(()=>[_(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(C,{class:"ea-table"},{default:o(()=>[e(v,{data:a.value.data,style:{width:"100%"},onSortChange:b},{default:o(()=>[e(l,{prop:"id",label:"ID",width:"80",sortable:"custom"}),e(l,{prop:"AdminUser.nickname",label:"管理员",width:"80"}),e(l,{prop:"AdminUser.id",label:"管理ID",width:"80"}),e(l,{prop:"ip",label:"来源IP地址",width:"120"}),e(l,{prop:"path",label:"请求地址"}),e(l,{prop:"method",label:"请求方法",width:"100"}),e(l,{prop:"payload",label:"请求参数","align-header":"center"},{default:o(d=>[c("pre",null,x(d.row.payload),1)]),_:1}),e(l,{prop:"status",label:"状态码",width:"100"}),e(l,{prop:"createdAt",label:"创建日期",width:"200"})]),_:1},8,["data"]),A,e(w,{background:"",layout:"total, sizes, prev, pager, next",total:a.value.total,"default-page-size":a.value.query.limit,onCurrentChange:g,onSizeChange:f},null,8,["total","default-page-size"])]),_:1})],64)}}};export{N as default};
