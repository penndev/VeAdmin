import{s as b,N as V,e as w,O as E,f as r,o as h,h as y,r as _,c as R,g as a,w as o,j as m,y as k,a as C,t as A,F as B,E as g,A as N}from"./index-ebzyugJO.js";const $=i=>b({url:"/example/list",method:"get",params:i}),F=i=>b({url:"/example/create",method:"post",data:i}),M=i=>b({url:"/example/update",method:"put",data:i}),P=i=>b({url:"/example/delete",method:"delete",params:i}),U={__name:"Pagination",props:{pageSize:{type:Number,required:!0},pageSizeModifiers:{}},emits:["update:pageSize"],setup(i){const d=V(),e=w(),f=E(i,"pageSize");d.data[e.path]&&f.value!==d.data[e.path]&&d.data[e.path]>0&&(f.value=d.data[e.path]);const l=t=>{d.data[e.path]=t};return(t,n)=>{const c=r("el-pagination");return h(),y(c,{background:"",layout:"total, sizes, prev, pager, next","page-size":f.value,onSizeChange:l},null,8,["page-size"])}}},I={target:"_blank"},L=C("br",null,null,-1),Q={class:"dialog-footer"},O={__name:"example",setup(i){const d=_(),e=_({selectStat:!1,total:0,query:{limit:20,page:1,order:null,name:null},data:[],handleTableData:()=>{$(e.value.query).then(t=>{e.value.data=t.data,e.value.total=t.total})},handleQueryRefresh:t=>{e.value.query.name=null,e.value.query.order=null,e.value.handleTableData()},handleChangePage:t=>{e.value.query.page=t,e.value.handleTableData()},handleChangeLimit:t=>{e.value.query.limit=t,e.value.handleTableData()},handleSortChange:({column:t,prop:n,order:c})=>{let p="";c==="descending"?p="-":c==="ascending"&&(p="+"),e.value.query.order=p+n,e.value.handleTableData()},handleInvertSelection:()=>{e.value.data.forEach(t=>{d.value.toggleRowSelection(t)})}}),f=_(null),l=_({visible:!1,title:"dialog",form:{},formRule:{email:[{required:!0,message:"邮箱",trigger:"blur"},{min:5,message:"用户名最少为5个字符",trigger:"blur"}]},formAction:"add",handleDialogAdd:()=>{l.value.title="创建数据",l.value.visible=!0,l.value.formAction="add",l.value.form={}},handleDialogEdit:t=>{l.value.title="编辑数据",l.value.visible=!0,l.value.formAction="edit",l.value.form=t},handleSubmitForm:()=>{f.value.validate(t=>{t?l.value.formAction==="add"?F(l.value.form).then(n=>{l.value.visible=!1,g.info(n),e.value.handleTableData()}):l.value.formAction==="edit"?M(l.value.form).then(n=>{l.value.visible=!1,g.info(n),e.value.handleTableData()}):g.error("提交错误"):g.error("请输入正确的数据！")})},handleDialogDelete:t=>{N.confirm(`请仔细确认是否删除数据[${t}]?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{P({id:t}).then(n=>{g.warning(n),e.value.handleTableData()})})}});return e.value.handleTableData(),(t,n)=>{const c=r("el-input"),p=r("el-form-item"),s=r("el-button"),S=r("el-form"),D=r("el-row"),v=r("el-table-column"),x=r("el-table"),z=r("el-main"),q=r("el-dialog");return h(),R(B,null,[a(S,{inline:!0},{default:o(()=>[a(p,{label:"名称"},{default:o(()=>[a(c,{modelValue:e.value.query.name,"onUpdate:modelValue":n[0]||(n[0]=u=>e.value.query.name=u),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),a(p,null,{default:o(()=>[a(s,{type:"primary",icon:"search",onClick:e.value.handleTableData},{default:o(()=>[m(" 查询 ")]),_:1},8,["onClick"]),a(s,{type:"info",icon:"Refresh",onClick:e.value.handleQueryRefresh},{default:o(()=>[m(" 重置 ")]),_:1},8,["onClick"])]),_:1})]),_:1}),a(z,{class:"ea-table"},{default:o(()=>[a(D,null,{default:o(()=>[a(s,{icon:e.value.selectStat?"SemiSelect":"Select",onClick:n[1]||(n[1]=u=>(e.value.selectStat=!e.value.selectStat)?"":d.value.clearSelection())},null,8,["icon"]),e.value.selectStat?(h(),y(s,{key:0,onClick:e.value.handleInvertSelection},{default:o(()=>[m(" 反选 ")]),_:1},8,["onClick"])):k("",!0),a(s,{type:"primary",icon:"Plus",onClick:l.value.handleDialogAdd},{default:o(()=>[m(" 新增 ")]),_:1},8,["onClick"])]),_:1}),a(x,{ref_key:"tableRef",ref:d,data:e.value.data,onSortChange:e.value.handleSortChange},{default:o(()=>[e.value.selectStat?(h(),y(v,{key:0,type:"selection",width:"50"})):k("",!0),a(v,{label:"ID",prop:"id",width:"80",sortable:"custom"}),a(v,{label:"名称",prop:"nickname",align:"center"}),a(v,{label:"邮箱"},{default:o(u=>[C("a",I,A(u.row.email),1)]),_:1}),a(v,{prop:"updatedAt",label:"最近更新"}),a(v,{prop:"createdAt",label:"创建日期"}),a(v,{fixed:"right",label:"操作"},{default:o(u=>[a(s,{link:"",type:"primary",onClick:T=>l.value.handleDialogEdit(u.row)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),a(s,{link:"",type:"danger",onClick:T=>l.value.handleDialogDelete(u.row.id)},{default:o(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange"]),L,a(U,{"page-size":e.value.query.limit,"onUpdate:pageSize":n[2]||(n[2]=u=>e.value.query.limit=u),total:e.value.total,onCurrentChange:e.value.handleChangePage,onSizeChange:e.value.handleChangeLimit},null,8,["page-size","total","onCurrentChange","onSizeChange"])]),_:1}),a(q,{modelValue:l.value.visible,"onUpdate:modelValue":n[5]||(n[5]=u=>l.value.visible=u),title:l.value.title,"close-on-click-modal":!1,"destroy-on-close":"","close-on-press-escape":"",center:""},{footer:o(()=>[C("span",Q,[a(s,{onClick:n[4]||(n[4]=u=>l.value.visible=!1)},{default:o(()=>[m("取消")]),_:1}),a(s,{type:"primary",onClick:l.value.handleSubmitForm},{default:o(()=>[m("确定")]),_:1},8,["onClick"])])]),default:o(()=>[a(S,{ref_key:"dialogRef",ref:f,"label-position":"left",model:l.value.form,rules:l.value.formRule},{default:o(()=>[a(p,{label:"邮箱",prop:"email"},{default:o(()=>[a(c,{modelValue:l.value.form.email,"onUpdate:modelValue":n[3]||(n[3]=u=>l.value.form.email=u)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}};export{O as default};
