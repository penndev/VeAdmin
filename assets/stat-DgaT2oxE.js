import{s as N}from"./wafcdn-D0y6egap.js";import{i as O}from"./index-DY31AMQw.js";import{_ as P,r as C,n as R,S as U,f as c,o as _,c as A,g as l,w as o,h as y,a,t as s,j as r,F as E,v as g,Q as H,p as L,k as j,R as F}from"./index-OkUB88G0.js";const n=p=>(L("data-v-a08eb5d3"),p=p(),j(),p),Q={class:"card-panel"},T=n(()=>a("br",null,null,-1)),X={class:"text"},Y=n(()=>a("br",null,null,-1)),$={class:"card-panel"},q=n(()=>a("br",null,null,-1)),G={class:"percentage-value"},J=n(()=>a("br",null,null,-1)),K=n(()=>a("br",null,null,-1)),W={class:"percentage-label"},Z={class:"text"},ee=n(()=>a("br",null,null,-1)),te={class:"card-panel"},ae=n(()=>a("br",null,null,-1)),le={class:"percentage-value"},oe=n(()=>a("br",null,null,-1)),se=n(()=>a("br",null,null,-1)),ne={class:"percentage-label"},ce={class:"text"},re=n(()=>a("br",null,null,-1)),ue={__name:"stat",setup(p){const e=C({cpu:{percent:0,count:0},memory:{progress:0,used:"",total:""},disk:{progress:0,used:"",total:""},conf:{time:"",version:""},file:{today:0,total:0},flushDelay:15});let m=null;const f=[],b=[],k=[],S=C(null),V={title:{text:"网络IO"},xAxis:{type:"category",data:f},yAxis:{type:"value",axisLabel:{formatter:(t,u)=>F(t)}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},valueFormatter:t=>F(t)},series:[{name:"接收",data:k,type:"line",areaStyle:{}},{name:"发送",data:b,type:"line",areaStyle:{}}]},D=()=>{N().then(t=>{e.value.cpu.percent=Math.round(t.cpu.percent),e.value.cpu.count=t.cpu.count,e.value.memory.progress=Math.round(t.memory.used/t.memory.total*100),e.value.memory.used=g(t.memory.used),e.value.memory.total=g(t.memory.total),e.value.disk.progress=Math.round(t.disk.used/t.disk.total*100),e.value.disk.used=g(t.disk.used),e.value.disk.total=g(t.disk.total),e.value.conf.time=H("Y-m-d H:i:s",t.conf.time),e.value.conf.version=t.conf.version,e.value.file.today=t.file.today,e.value.file.total=t.file.total;const u=new Date;f.push(u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()),b.push(t.traffic.send),k.push(t.traffic.recv),f.length>30&&(f.shift(),k.shift(),b.shift()),m.setOption(V)})};R(()=>{m=O(S.value),m.hideLoading(),window.onresize=function(){m.resize()}}),D();const B=setInterval(D,e.value.flushDelay*1e3);return U(()=>{clearInterval(B)}),(t,u)=>{const v=c("el-option"),M=c("el-select"),x=c("el-progress"),d=c("el-col"),w=c("el-row"),h=c("el-link"),z=c("el-tooltip"),I=c("el-card");return _(),A(E,null,[l(M,{modelValue:e.value.flushDelay,"onUpdate:modelValue":u[0]||(u[0]=i=>e.value.flushDelay=i)},{default:o(()=>[(_(),y(v,{key:5,label:"服务器状态刷新间隔: 5秒",value:5})),(_(),y(v,{key:15,label:"服务器状态刷新间隔: 15秒",value:15})),(_(),y(v,{key:30,label:"服务器状态刷新间隔: 30秒",value:30})),(_(),y(v,{key:60,label:"服务器状态刷新间隔: 60秒",value:60}))]),_:1},8,["modelValue"]),l(w,{gutter:40,class:"panel-group"},{default:o(()=>[l(d,{xs:24,sm:8},{default:o(()=>[a("div",Q,[T,l(x,{type:"circle",percentage:e.value.cpu.percent},null,8,["percentage"]),a("div",X," CPU / "+s(e.value.cpu.count),1),Y])]),_:1}),l(d,{xs:24,sm:8},{default:o(()=>[a("div",$,[q,l(x,{type:"circle",percentage:e.value.memory.progress},{default:o(({percentage:i})=>[a("span",G,s(i)+"%",1),J,K,a("span",W,s(e.value.memory.used),1)]),_:1},8,["percentage"]),a("div",Z," 内存 / "+s(e.value.memory.total),1),ee])]),_:1}),l(d,{xs:24,sm:8},{default:o(()=>[a("div",te,[ae,l(x,{type:"circle",percentage:e.value.disk.progress},{default:o(({percentage:i})=>[a("span",le,s(i)+"%",1),oe,se,a("span",ne,s(e.value.disk.used),1)]),_:1},8,["percentage"]),a("div",ce," 硬盘 / "+s(e.value.disk.total),1),re])]),_:1})]),_:1}),l(w,{gutter:12,class:"notifyCard"},{default:o(()=>[l(d,{span:12},{default:o(()=>[l(I,{shadow:"always"},{default:o(()=>[r(" 配置版本: "),l(h,{type:"info"},{default:o(()=>[r(s(e.value.conf.time),1)]),_:1}),r("  -  "),l(z,{content:e.value.conf.version},{default:o(()=>[l(h,{type:"primary"},{default:o(()=>[r(s(e.value.conf.version.substring(0,12)),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(I,{shadow:"always"},{default:o(()=>[r(" 缓存文件: 今日 "),l(h,{type:"success"},{default:o(()=>[r(s(e.value.file.today),1)]),_:1}),r(" / 总计 "),l(h,{type:"primary"},{default:o(()=>[r(s(e.value.file.total),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(d,{span:24},{default:o(()=>[a("div",{ref_key:"netChart",ref:S,class:"netChart"},null,512)]),_:1})]),_:1})],64)}}},pe=P(ue,[["__scopeId","data-v-a08eb5d3"]]);export{pe as default};
