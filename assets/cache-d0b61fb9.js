import{a as q,d as x}from"./wafcdn-f079b889.js";import{r as D,f as n,o as B,c as V,a as p,g as e,w as t,j as s,t as E,F as S,v as z,E as T}from"./index-268d0e92.js";import"./request-a31cef06.js";const A={target:"_blank"},N=p("br",null,null,-1),R={__name:"cache",setup($){const l=D({total:0,query:{limit:20,page:1,order:null,name:null},data:[]}),_=a=>{l.value.query.name=null,l.value.query.order=null,o()},f=a=>{l.value.query.page=a,o()},g=a=>{l.value.query.limit=a,o()},h=({column:a,prop:r,order:m})=>{let i="";m==="descending"?i="-":m==="ascending"&&(i="+"),l.value.query.order=i+r,o()},o=()=>{q(l.value.query).then(a=>{l.value.data=a.data,l.value.total=a.total})},y=a=>{z.confirm(`请仔细确认是否删除数据[${a}]?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{x({id:a}).then(r=>{T.warning(r),o()})})};return o(),(a,r)=>{const m=n("el-input"),i=n("el-form-item"),d=n("el-button"),b=n("el-form"),u=n("el-table-column"),v=n("el-table"),C=n("el-pagination"),k=n("el-main");return B(),V(S,null,[p("div",null,[e(b,{inline:!0},{default:t(()=>[e(i,{label:"名称"},{default:t(()=>[e(m,{modelValue:l.value.query.name,"onUpdate:modelValue":r[0]||(r[0]=c=>l.value.query.name=c),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(d,{type:"primary",icon:"search",onClick:o},{default:t(()=>[s(" 查询 ")]),_:1}),e(d,{type:"info",icon:"Refresh",onClick:_},{default:t(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(k,{style:{"background-color":"#fff"}},{default:t(()=>[e(d,{type:"primary",icon:"Plus",onClick:a.handleDialogAdd},{default:t(()=>[s(" 新增 ")]),_:1},8,["onClick"]),e(v,{data:l.value.data,onSortChange:h},{default:t(()=>[e(u,{label:"ID",prop:"id",width:"80",sortable:"custom"}),e(u,{label:"名称",prop:"nickname",width:"160",align:"center"}),e(u,{label:"邮箱",width:"240"},{default:t(c=>[p("a",A,E(c.row.email),1)]),_:1}),e(u,{prop:"updatedAt",label:"最近更新",width:"200"}),e(u,{prop:"createdAt",label:"创建日期",width:"200"}),e(u,{fixed:"right",label:"操作",width:"105"},{default:t(c=>[e(d,{link:"",type:"primary",onClick:w=>a.handleDialogEdit(c.row)},{default:t(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),e(d,{link:"",type:"danger",onClick:w=>y(c.row.id)},{default:t(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),N,e(C,{background:"",layout:"total, sizes, prev, pager, next",total:l.value.total,"page-size":l.value.query.limit,onCurrentChange:f,onSizeChange:g},null,8,["total","page-size"])]),_:1})],64)}}};export{R as default};
